<%- include('./../partials/header.ejs') %> 
<%- include('./../partials/header.ejs') %> 
<!-- <%- include('./../partials/navigation.ejs') %>  -->
<% if (isLoggedIn) { %>
    <%- include('./../partials/BootNav_2.ejs') %>
<% } else{ %>
    <%- include('./../partials/BootNav.ejs') %>
    <% } %>
    
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/styles1.css">
    <link rel="stylesheet" href="/css/coloring.css">
<div><a href="/getCart?q=1&p_id=<%= product._id %>" id="addToCartLink" data-pid="<%= product._id %>"> Add to Cart  </a></div>
<br>
<br>
<div class="quantity-input">
    <button class="decrement">-</button>
    <input type="text" id="quantity" name="quantity" value="1">
    <button class="increment">+</button>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    

  $(document).ready(function () {
      $('.increment, .decrement').click(function () {
          var quantityInput = $(this).siblings('input[type="text"]');
          var currentValue = parseInt(quantityInput.val(), 10);

          if ($(this).hasClass('increment')) {
              // Increment button clicked
              quantityInput.val(currentValue + 1);
          } else if ($(this).hasClass('decrement') && currentValue > 1) {
              // Decrement button clicked (if quantity > 1)
              quantityInput.val(currentValue - 1);
          }

          var updatedQuantity = quantityInput.val();
          var element = document.getElementById("addToCartLink");
          var dataValue = element.getAttribute("data-pid");

          // Combine quantity and product ID into the URL
          var addToCartUrl = "/getOrders?q=" + updatedQuantity + "&p_id=" + dataValue;

          // Set the updated URL as the href attribute of the "Add to Cart" link
          $('/addToCart').attr('href', addToCartUrl);
      });

  });



</script>

